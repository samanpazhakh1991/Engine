{
  "NServiceBus.MessageId": "121b7ec8-c6c3-4e76-8069-b0f100c5b162",
  "NServiceBus.MessageIntent": "Send",
  "NServiceBus.ConversationId": "7b3e1e72-2ab8-4d7e-aa0f-b0f100c5b164",
  "NServiceBus.CorrelationId": "121b7ec8-c6c3-4e76-8069-b0f100c5b162",
  "NServiceBus.ReplyToAddress": "ApiGateway",
  "NServiceBus.OriginatingMachine": "DESKTOP-IVIJ3AV",
  "NServiceBus.OriginatingEndpoint": "ApiGateway",
  "$.diagnostics.originating.hostid": "29ea84f983922e6d5f3a892358c36da5",
  "NServiceBus.ContentType": "text\/xml",
  "NServiceBus.EnclosedMessageTypes": "Messages.AddOrderCommandMessage, Messages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null",
  "NServiceBus.Version": "8.1.6",
  "NServiceBus.TimeSent": "2024-01-08 11:59:46:695126 Z",
  "traceparent": "00-cdc550460f3975e270b6af7fdad0c5a1-4efaa252ea977869-00",
  "NServiceBus.ProcessingMachine": "DESKTOP-IVIJ3AV",
  "NServiceBus.Retries.Timestamp": "2024-01-08 12:02:37:167771 Z",
  "NServiceBus.DeliverAt": "2024-01-08 12:02:14:841498 Z",
  "NServiceBus.ProcessingEndpoint": "StockMarketService",
  "$.diagnostics.hostid": "277f4893dde5d25236752ac6b4203ff9",
  "$.diagnostics.hostdisplayname": "DESKTOP-IVIJ3AV",
  "NServiceBus.FailedQ": "StockMarketService",
  "NServiceBus.ExceptionInfo.ExceptionType": "Autofac.Core.DependencyResolutionException",
  "NServiceBus.ExceptionInfo.InnerExceptionType": "Microsoft.Data.SqlClient.SqlException",
  "NServiceBus.ExceptionInfo.HelpLink": null,
  "NServiceBus.ExceptionInfo.Message": "An exception was thrown while activating MessageHandlers.OrderCommandsHandler -> FacadeProvider.OrderFacadeProviders.OrderCommandFacade -> Application.OrderService.OrderCommandHandlers.TransactionalCommandHandler`1[[Application.Contract.Commands.AddOrderCommand, Application.Contract, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> Application.OrderService.OrderCommandHandlers.AddOrderCommandHandler -> Infrastructure.Orders.CommandRepositories.OrderCommandRepository -> Infrastructure.TradeMatchingEngineContext -> λ:Microsoft.EntityFrameworkCore.DbContextOptions`1[[Infrastructure.TradeMatchingEngineContext, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]].",
  "NServiceBus.ExceptionInfo.Source": "Autofac",
  "NServiceBus.ExceptionInfo.StackTrace": "Autofac.Core.DependencyResolutionException: An exception was thrown while activating MessageHandlers.OrderCommandsHandler -> FacadeProvider.OrderFacadeProviders.OrderCommandFacade -> Application.OrderService.OrderCommandHandlers.TransactionalCommandHandler`1[[Application.Contract.Commands.AddOrderCommand, Application.Contract, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> Application.OrderService.OrderCommandHandlers.AddOrderCommandHandler -> Infrastructure.Orders.CommandRepositories.OrderCommandRepository -> Infrastructure.TradeMatchingEngineContext -> λ:Microsoft.EntityFrameworkCore.DbContextOptions`1[[Infrastructure.TradeMatchingEngineContext, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]].\r\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database \"StockMarketDB\" requested by the login. The login failed.\r\nLogin failed for user 'TIBA\\S.Pazhakh'.\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)\r\n   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)\r\n--- End of stack trace from previous location ---\r\n   at Infrastructure.DbConnectionManager.GetConnectionAsync() in C:\\Tiba_Learning\\StockMarcketLearning\\Repository\\DbConnectionManager.cs:line 58\r\n   at Infrastructure.BusinessDependencies.<>c.<DependencyHolder>b__2_0(IServiceProvider sp, DbContextOptionsBuilder ob) in C:\\Tiba_Learning\\StockMarcketLearning\\Repository\\BusinessDependencies.cs:line 84\r\n   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)\r\n   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.<>c__DisplayClass17_0`1.<AddCoreServices>b__0(IServiceProvider p)\r\n   at Autofac.Extensions.DependencyInjection.AutofacRegistration.<>c__DisplayClass3_0.<Register>b__0(IComponentContext context, IEnumerable`1 parameters)\r\n   at Autofac.Core.Activators.Delegate.DelegateActivator.ActivateInstance(IComponentContext context, IEnumerable`1 parameters)\r\n   at Autofac.Core.Activators.Delegate.DelegateActivator.<ConfigurePipeline>b__2_0(ResolveRequestContext context, Action`1 next)\r\n   at Autofac.Core.Resolving.Middleware.DisposalTrackingMiddleware.Execute(ResolveRequestContext context, Action`1 next)\r\n   at Autofac.Core.Resolving.Middleware.ActivatorErrorHandlingMiddleware.Execute(ResolveRequestContext context, Action`1 next)\r\nClientConnectionId:81dc501b-3ea3-4a12-8882-1973cbba63bf\r\nError Number:4060,State:1,Class:11\r\n   --- End of inner exception stack trace ---\r\n   at Autofac.Core.Resolving.Middleware.ActivatorErrorHandlingMiddleware.Execute(ResolveRequestContext context, Action`1 next)\r\n   at Autofac.Core.Lifetime.LifetimeScope.CreateSharedInstance(Guid id, Func`1 creator)\r\n   at Autofac.Core.Lifetime.LifetimeScope.CreateSharedInstance(Guid primaryId, Nullable`1 qualifyingId, Func`1 creator)\r\n   at Autofac.Core.Resolving.Middleware.SharingMiddleware.Execute(ResolveRequestContext context, Action`1 next)\r\n   at Autofac.Core.Resolving.Middleware.CircularDependencyDetectorMiddleware.Execute(ResolveRequestContext context, Action`1 next)\r\n   at Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, ResolveRequest request)\r\n   at Autofac.Core.Resolving.ResolveOperation.ExecuteOperation(ResolveRequest request)\r\n   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)\r\n   at NServiceBus.LoadHandlersConnector.Invoke(IIncomingLogicalMessageContext context, Func`2 stage) in \/_\/src\/NServiceBus.Core\/Pipeline\/Incoming\/LoadHandlersConnector.cs:line 37\r\n   at NServiceBus.DeserializeMessageConnector.Invoke(IIncomingPhysicalMessageContext context, Func`2 stage) in \/_\/src\/NServiceBus.Core\/Pipeline\/Incoming\/DeserializeMessageConnector.cs:line 32\r\n   at NServiceBus.ProcessingStatisticsBehavior.Invoke(IIncomingPhysicalMessageContext context, Func`2 next) in \/_\/src\/NServiceBus.Core\/Performance\/Statistics\/ProcessingStatisticsBehavior.cs:line 25\r\n   at NServiceBus.TransportReceiveToPhysicalMessageConnector.Invoke(ITransportReceiveContext context, Func`2 next) in \/_\/src\/NServiceBus.Core\/Pipeline\/Incoming\/TransportReceiveToPhysicalMessageConnector.cs:line 35\r\n   at NServiceBus.RetryAcknowledgementBehavior.Invoke(ITransportReceiveContext context, Func`2 next) in \/_\/src\/NServiceBus.Core\/ServicePlatform\/Retries\/RetryAcknowledgementBehavior.cs:line 25\r\n   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in \/_\/src\/NServiceBus.Core\/Pipeline\/MainPipelineExecutor.cs:line 49\r\n   at NServiceBus.MainPipelineExecutor.Invoke(MessageContext messageContext, CancellationToken cancellationToken) in \/_\/src\/NServiceBus.Core\/Pipeline\/MainPipelineExecutor.cs:line 68\r\n   at NServiceBus.LearningTransportMessagePump.ProcessFile(ILearningTransportTransaction transaction, String messageId, CancellationToken messageProcessingCancellationToken) in \/_\/src\/NServiceBus.Core\/Transports\/Learning\/LearningTransportMessagePump.cs:line 340",
  "NServiceBus.TimeOfFailure": "2024-01-08 12:03:08:224020 Z",
  "NServiceBus.ExceptionInfo.Data.ActivatorChain": "MessageHandlers.OrderCommandsHandler -> FacadeProvider.OrderFacadeProviders.OrderCommandFacade -> Application.OrderService.OrderCommandHandlers.TransactionalCommandHandler`1[[Application.Contract.Commands.AddOrderCommand, Application.Contract, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] -> Application.OrderService.OrderCommandHandlers.AddOrderCommandHandler -> Infrastructure.Orders.CommandRepositories.OrderCommandRepository -> Infrastructure.TradeMatchingEngineContext -> λ:Microsoft.EntityFrameworkCore.DbContextOptions`1[[Infrastructure.TradeMatchingEngineContext, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]",
  "NServiceBus.ExceptionInfo.Data.Message ID": "121b7ec8-c6c3-4e76-8069-b0f100c5b162",
  "NServiceBus.ExceptionInfo.Data.Transport message ID": "e0e1e9d4-44b9-4ec4-86ef-ea869835513a",
  "NServiceBus.ExceptionInfo.Data.Pipeline canceled": "False"
}